<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Review Form</title>
</head>
<body>
  <h2>Leave a Review</h2>
  <input type="text" id="name" placeholder="Your Name"><br>
  <select id="rating">
    <option value="5">★★★★★</option>
    <option value="4">★★★★☆</option>
    <option value="3">★★★☆☆</option>
    <option value="2">★★☆☆☆</option>
    <option value="1">★☆☆☆☆</option>
  </select><br>
  <textarea id="comment" placeholder="Your Review"></textarea><br>
  <button onclick="submitReview()">Submit</button>

  <h2>All Reviews</h2>
  <div id="reviews"></div>

  <script>
    async function submitReview() {
      const name = document.getElementById("name").value;
      const rating = document.getElementById("rating").value;
      const comment = document.getElementById("comment").value;

      await fetch("/reviews", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, rating: parseInt(rating), comment })
      });

      loadReviews();
    }

    async function loadReviews() {
      const res = await fetch("/reviews");
      const data = await res.json();
      const container = document.getElementById("reviews");
      container.innerHTML = "";
      data.forEach(r => {
        container.innerHTML += `
          <div style="border:1px solid #ccc; margin:10px; padding:10px;">
            <b>${r.name}</b><br>
            ${"★".repeat(r.rating)}${"☆".repeat(5 - r.rating)}<br>
            <i>${r.comment}</i>
          </div>
        `;
      });
    }

    loadReviews();
  </script>
</body>
</html>
